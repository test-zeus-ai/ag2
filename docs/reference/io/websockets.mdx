---
sidebarTitle: websockets
title: io.websockets
---

## ServerConnection

```python
class ServerConnection(Protocol)
```

### send

```python
def send(message: Union[Data, Iterable[Data]]) -> None
```

Send a message to the client.

**Arguments**:

- `message` _Union[Data, Iterable[Data]]_ - The message to send.

### recv

```python
def recv(timeout: Optional[float] = None) -> Data
```

Receive a message from the client.

**Arguments**:

- `timeout` _Optional[float], optional_ - The timeout for the receive operation. Defaults to None.
  

**Returns**:

- `Data` - The message received from the client.

### close

```python
def close() -> None
```

Close the connection.

## WebSocketServer

```python
class WebSocketServer(Protocol)
```

### serve\_forever

```python
def serve_forever() -> None
```

Run the server forever.

### shutdown

```python
def shutdown() -> None
```

Shutdown the server.

### \_\_enter\_\_

```python
def __enter__() -> "WebSocketServer"
```

Enter the server context.

### \_\_exit\_\_

```python
def __exit__(exc_type: Any, exc_value: Any, traceback: Any) -> None
```

Exit the server context.

## IOWebsockets

```python
@require_optional_import("websockets", "websockets")
class IOWebsockets(IOStream)
```

A websocket input/output stream.

### \_\_init\_\_

```python
def __init__(websocket: ServerConnection) -> None
```

Initialize the websocket input/output stream.

**Arguments**:

- `websocket` _ServerConnection_ - The websocket server.
  

**Raises**:

- `ImportError` - If the websockets module is not available.

### run\_server\_in\_thread

```python
@staticmethod
@contextmanager
def run_server_in_thread(*,
                         host: str = "127.0.0.1",
                         port: int = 8765,
                         on_connect: Callable[["IOWebsockets"], None],
                         ssl_context: Optional[ssl.SSLContext] = None,
                         **kwargs: Any) -> Iterator[str]
```

Factory function to create a websocket input/output stream.

**Arguments**:

- `host` _str, optional_ - The host to bind the server to. Defaults to "127.0.0.1".
- `port` _int, optional_ - The port to bind the server to. Defaults to 8765.
- `on_connect` _Callable[[IOWebsockets], None]_ - The function to be executed on client connection. Typically creates agents and initiate chat.
- `ssl_context` _Optional[ssl.SSLContext], optional_ - The SSL context to use for secure connections. Defaults to None.
- `kwargs` _Any_ - Additional keyword arguments to pass to the websocket server.
  

**Yields**:

- `str` - The URI of the websocket server.

### websocket

```python
@property
def websocket() -> "ServerConnection"
```

The URI of the websocket server.

### print

```python
def print(*objects: Any,
          sep: str = " ",
          end: str = "\n",
          flush: bool = False) -> None
```

Print data to the output stream.

**Arguments**:

- `objects` _any_ - The data to print.
- `sep` _str, optional_ - The separator between objects. Defaults to " ".
- `end` _str, optional_ - The end of the output. Defaults to "
  ".
- `flush` _bool, optional_ - Whether to flush the output. Defaults to False.

### send

```python
def send(message: BaseMessage) -> None
```

Send a message to the output stream.

**Arguments**:

- `message` _Any_ - The message to send.

### input

```python
def input(prompt: str = "", *, password: bool = False) -> str
```

Read a line from the input stream.

**Arguments**:

- `prompt` _str, optional_ - The prompt to display. Defaults to "".
- `password` _bool, optional_ - Whether to read a password. Defaults to False.
  

**Returns**:

- `str` - The line read from the input stream.

